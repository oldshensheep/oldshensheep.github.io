<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>Windows | oldshensheep</title><meta name=keywords content><meta name=description content="oldshensheep"><meta name=author content="oldshensheep"><link rel=canonical href=https://blog.oldshensheep.com/tags/windows/><link crossorigin=anonymous href=/assets/css/stylesheet.min.ec8da366ca2fb647537ccb7a8f6fa5b4e9cd3c7a0d3171dd2d3baad1e49c8bfc.css integrity="sha256-7I2jZsovtkdTfMt6j2+ltOnNPHoNMXHdLTuq0eSci/w=" rel="preload stylesheet" as=style><link rel=icon href=https://blog.oldshensheep.com/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://blog.oldshensheep.com/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://blog.oldshensheep.com/favicon-32x32.png><link rel=apple-touch-icon href=https://blog.oldshensheep.com/apple-touch-icon.png><link rel=mask-icon href=https://blog.oldshensheep.com/apple-touch-icon.png><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate type=application/rss+xml href=https://blog.oldshensheep.com/tags/windows/index.xml><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--hljs-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><meta property="og:title" content="Windows"><meta property="og:description" content="oldshensheep"><meta property="og:type" content="website"><meta property="og:url" content="https://blog.oldshensheep.com/tags/windows/"><meta property="og:image" content="https://blog.oldshensheep.com/%3Clink%20or%20path%20of%20image%20for%20opengraph,%20twitter-cards%3E"><meta property="og:site_name" content="oldshensheep"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://blog.oldshensheep.com/%3Clink%20or%20path%20of%20image%20for%20opengraph,%20twitter-cards%3E"><meta name=twitter:title content="Windows"><meta name=twitter:description content="oldshensheep"></head><body class=list id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://blog.oldshensheep.com/ accesskey=h title="Home (Alt + H)"><img src=https://blog.oldshensheep.com/apple-touch-icon.png alt=logo aria-label=logo height=35>Home</a>
<span class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></span></div><ul id=menu><li><a href=https://blog.oldshensheep.com/categories/ title=categories><span>categories</span></a></li><li><a href=https://blog.oldshensheep.com/tags/ title=tags><span>tags</span></a></li><li><a href=https://oldshensheep.github.io/toyweb/ title=toys><span>toys</span></a></li></ul></nav></header><main class=main><header class=page-header><div class=breadcrumbs><a href=https://blog.oldshensheep.com/>Home</a>&nbsp;Â»&nbsp;<a href=https://blog.oldshensheep.com/tags/>Tags</a></div><h1>Windows
<a href=index.xml title=RSS aria-label=RSS><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" height="23"><path d="M4 11a9 9 0 019 9"/><path d="M4 4a16 16 0 0116 16"/><circle cx="5" cy="19" r="1"/></svg></a></h1></header><article class="post-entry tag-entry"><header class=entry-header><h2>Windows å¿«ç…§ï¼Ÿ</h2></header><div class=entry-content><p>Windows ä¹Ÿæœ‰å¿«ç…§ï¼ŸçœŸçš„æ˜¯æ–‡ä»¶ç³»ç»Ÿçš„å¿«ç…§ï¼Ÿè¿˜å¯ä»¥é€šè¿‡ç³»ç»Ÿè‡ªå¸¦çš„æ–‡ä»¶å†å²è¿˜åŸï¼Ÿ
æ–°å»ºå¿«ç…§ Windows ç§°ä¹‹ä¸º Volume Shadow Copy (VSS)
Windows çš„å¿«ç…§æ˜¯é€šè¿‡ Copy On Write å®ç°çš„ï¼Œä¼—æ‰€å‘¨çŸ¥å¯¹æ€§èƒ½æœ‰ä¸€å®šå½±å“ã€‚
å…³é—­ç³»ç»Ÿè¿˜åŸç‚¹åŠŸèƒ½ æ–°å»ºå¿«ç…§æ˜¯ä¸éœ€è¦å¼€å¯ç³»ç»Ÿè¿˜åŸç‚¹åŠŸèƒ½çš„ï¼
å¼€å¯è¿˜åŸç‚¹åŠŸèƒ½ä¼šå¯¼è‡´è€çš„å¿«ç…§æ›´å¿«çš„è¢«åˆ é™¤ï¼Œå› ä¸ºå¿«ç…§å ç”¨çš„ç©ºé—´æ˜¯æœ‰é™çš„ï¼Œè€Œè¿˜åŸç‚¹ä¼šå ç”¨å¤§é‡çš„å¿«ç…§ç©ºé—´ï¼Œå¿«ç…§ç©ºé—´ä¸è¶³å°±ä¼šåˆ é™¤æ—§çš„å¿«ç…§ï¼Œæ‰€ä»¥æœ€å¥½æŠŠè¿˜åŸç‚¹åŠŸèƒ½å…³é—­äº†ã€‚
æ–°å»ºä¸€ä¸ªå¿«ç…§ æ–°å»ºä¸€ä¸ªæ–‡ä»¶æµ‹è¯•ä¸€ä¸‹å¿«ç…§
åœ¨ HOME ç›®å½•ä¸‹æ–°å»ºä¸€ä¸ªå†…å®¹ä¸º 100 çš„ test.txt æ–‡ä»¶
â¯ 100 > test.txt â¯ cat .\test.txt 100 åˆ›å»ºä¸€ä¸ª C ç›˜çš„å¿«ç…§ï¼Œæ³¨æ„æˆ‘è¿™é‡Œç”¨äº† sudo è¡¨æ˜éœ€è¦ç®¡ç†å‘˜æƒé™ã€‚
â¯ sudo wmic shadowcopy call create Volume=C:\ Executing (Win32_ShadowCopy)->create() Method execution successful. Out Parameters: instance of __PARAMETERS { ReturnValue = 0; ShadowID = "{57587129-D224-4E21-BC36-4C3D9B1DFDC7}"; }; å¿«ç…§å°±æˆåŠŸå»ºç«‹äº†ï¼
çœ‹çœ‹æ•ˆæœæ˜¯æ€ä¹ˆæ ·çš„ï¼ŒæŠŠä¹‹å‰æ–°å»ºå¾—åˆ° ~/test.txt çš„å†…å®¹ä¿®æ”¹ä¸º 101 è¯•è¯•ã€‚...</p></div><footer class=entry-footer><span title='2022-08-09 20:00:00 +0000 UTC'>August 9, 2022</span>&nbsp;Â·&nbsp;2 min&nbsp;Â·&nbsp;239 words&nbsp;Â·&nbsp;oldshensheep</footer><a class=entry-link aria-label="post link to Windows å¿«ç…§ï¼Ÿ" href=https://blog.oldshensheep.com/note/windows-snapshot/></a></article><article class="post-entry tag-entry"><header class=entry-header><h2>ZFS on Windows (using WSL2)</h2></header><div class=entry-content><p>è¿™ä¸ªè®© ZFS å·¥ä½œåœ¨ Windows ä¸Šçš„é¡¹ç›®è¿˜ä¸å¤ªç¨³å®šï¼Œç»å¸¸è“å±ï¼Œä¾¿å¯»æ±‚å…¶ä»–è§£å†³æ–¹æ¡ˆï¼Œäºæ˜¯ä¹ã€‚
æœ‰äººå¯èƒ½ä¼šè¯´ä½ åœ¨ä¸æ˜¯è„±è£¤å­æ”¾å±å—ï¼Œè¿™ä¸å°±æ˜¯è£…ä¸ªè™šæ‹Ÿæœºè¿è¡Œ Linuxï¼Ÿï¼Ÿï¼Ÿ
æ˜¯çš„ï¼Œæˆ‘å°±æ˜¯è„±è£¤å­æ”¾å±ã€‚
å†™è¿™ä¸ªæ–‡ç« çš„æ—¶å€™ä½¿ç”¨çš„æ˜¯ ArchLinux çš„ WSL2ï¼Œä¸ºäº†ä½¿æ•™ç¨‹æ›´ç®€å•ï¼Œä¹Ÿä¸ºäº†ä» 0 å®ç°ï¼Œè¿™ç¯‡æ–‡ç« ä½¿ç”¨ Ubuntu22.04 ç‰ˆæœ¬è¿›è¡Œæµ‹è¯•ã€‚
å…ˆå†³æ¡ä»¶ å®‰è£… WSL2 ç‰ˆæœ¬çš„ Ubuntu22.04ï¼Œå…¶ä»–çš„ç³»ç»Ÿç‰ˆæœ¬åº”å½“ä¹Ÿå¯ã€‚
å…·ä½“å®‰è£…æ–¹æ³•å‚è€ƒå®˜æ–¹æ–‡æ¡£ã€‚
å¯¹äºç³»ç»Ÿç‰ˆæœ¬å¤§äº Windows 10 version 2004 æˆ–è€… Windows11 çš„ç”¨æˆ·å‚è€ƒä¸‹é¢çš„æ–‡æ¡£ï¼š
https://docs.microsoft.com/en-us/windows/wsl/install
å¯¹äºç³»ç»Ÿç‰ˆæœ¬å¤§äº Version 1903 çš„å‚è€ƒä¸‹é¢çš„æ–‡æ¡£ï¼š
https://docs.microsoft.com/en-us/windows/wsl/install-manual
æ›¿æ¢ WSL çš„ Linux Kernel å‚è€ƒæ–‡æ¡£1
åœ¨æ­¤ https://github.com/oldshensheep/zfs-on-wsl/releases ä¸‹è½½ç¼–è¯‘å¥½çš„æ”¯æŒ ZFS çš„ Kernelï¼Œéœ€è¦ä¸‹è½½ bzImageï¼Œæ”¾åˆ° Windows çš„ä¸€ä¸ªåœ°æ–¹ã€‚
ç„¶ååœ¨ PowerShell çª—å£ä¸­æ‰§è¡Œä»¥ä¸‹å‘½ä»¤ï¼š
æ³¨æ„æŠŠ&lt;bzImage Path>æ›¿æ¢æˆä½ ä¸‹è½½çš„ bzImage çš„è·¯å¾„ï¼Œä¾‹å¦‚C:\\Fun\\bzImage
" [wsl2] kernel=&lt;bzImage Path> " > ~/.wslconfig ç„¶åwsl --shutdownå…³é—­è¿è¡Œä¸­çš„å®ä¾‹ï¼Œç„¶åé‡æ–°å¯åŠ¨ Ubuntuã€‚
æŒ‚è½½ç¡¬ç›˜åˆ° WSL2 å‚è€ƒæ–‡æ¡£2...</p></div><footer class=entry-footer><span title='2022-07-27 18:30:00 +0000 UTC'>July 27, 2022</span>&nbsp;Â·&nbsp;2 min&nbsp;Â·&nbsp;412 words&nbsp;Â·&nbsp;oldshensheep</footer><a class=entry-link aria-label="post link to ZFS on Windows (using WSL2)" href=https://blog.oldshensheep.com/note/zfs-on-windows/></a></article><article class="post-entry tag-entry"><header class=entry-header><h2>è®© Windows æ›´åŠ é€‚åˆå¼€å‘</h2></header><div class=entry-content><p>åœ¨ Windows ä¸Šè¿›è¡Œä¼˜é›…çš„ç¼–ç¨‹æ˜¯ä¸ªå¤´ç–¼çš„é—®é¢˜ï¼Œä½†æ˜¯åœ¨æˆ‘çš„ç²¾å¿ƒè°ƒæ•™ä¸‹ï¼Œå¥¹å˜å¾—å¬è¯äº†è®¸å¤šâ€¦â€¦
å®‰è£… scoop ä¸ºä»€ä¹ˆé€‰æ‹© scoopï¼Ÿ
æœ‰ç±»ä¼¼çš„é€‰æ‹©å¦‚ chocolatey ï¼ŒWinGet ä½†æ˜¯æˆ‘é€‰æ‹©äº† scoopã€‚ç¬¬ä¸€æ˜¯å› ä¸º scoop çš„è½¯ä»¶å¾ˆå¤šæ˜¯ä¾¿æºè½¯ä»¶ã€‚ä¾¿æºï¼Œé¡¾åæ€ä¹‰å¯ä»¥å¾ˆæ–¹ä¾¿å¸¦ç€è·‘çš„ä¸œè¥¿ã€‚scoop å®‰è£…çš„è½¯ä»¶ä¹Ÿæ˜¯ä¸€æ ·çš„ï¼Œé‡è£…ç³»ç»Ÿä¸å¿…é‡æ–°é…ç½®ä¸€å¤§å †ç¯å¢ƒå˜é‡ï¼Œä¸å¿…é‡æ–°å®‰è£…ä¸€å¤§å †è½¯ä»¶ã€‚é‡è£…ç³»ç»Ÿåå¯ä»¥å¾ˆå¿«å°±å¯ä»¥é…ç½®å¥½å„ç§ç¯å¢ƒå˜é‡ï¼Œè½¯ä»¶ä¹Ÿä¸å¿…å†å®‰è£…ã€‚
å®‰è£… scoop ä¹Ÿéå¸¸ç®€å•
Set-ExecutionPolicy RemoteSigned -Scope CurrentUser irm get.scoop.sh | iex æœ‰æ›´å¤šé—®é¢˜è®¿é—® scoop å®˜ç½‘ https://scoop.sh/
æŠ¥å‘Šé—®é¢˜ç­‰è®¿é—®ä»“åº“ Issue https://github.com/ScoopInstaller/Scoop/issues
å˜æˆLindows å®‰è£…äº† scoopï¼Œæ˜¯æ—¶å€™å±•ç°å¥¹çš„åŠ›é‡äº†ã€‚
å…ˆæ¥å®‰è£…ä¸€ä¸‹ busybox å’Œ gsudo
scoop install busybox gsudo busybox å†…ç½®äº† linux çš„å¾ˆå¤šå‘½ä»¤ï¼Œå¸¸ç”¨çš„åŸºæœ¬ä¸Šéƒ½æœ‰äº†ã€‚
å®‰è£… gsudo å¯ä»¥ä¸´æ—¶ææƒç±»ä¼¼ä¸ linux çš„ sudoï¼ˆä¸è¿‡æœ‰çƒ¦äººçš„ UACï¼Œå…³æ‰åˆä¸å®‰å…¨ï¼‰ã€‚Windows æœ€ç»ˆå˜æˆäº† Linux çš„æ ·å­ï¼Œå˜¿å˜¿ Windowsâ¤ï¸Linuxã€‚
å®‰è£…å®Œæˆåå¯ä»¥ä½¿ç”¨sudoå‘½ä»¤ææƒ
ğŸ”½ç‚¹å‡»å±•å¼€ Windowsä¸­busyboxè‡ªå¸¦çš„å‘½ä»¤ ar arch ash awk base64 basename bash bunzip2 bzcat bzip2 cal cat chmod cksum clear cmp comm cp cpio cut date dc dd df diff dirname dos2unix dpkg dpkg-deb du echo ed egrep env expand expr factor false fgrep find fold fsync ftpget ftpput getopt grep groups gunzip gzip hd head hexdump httpd iconv id ipcalc kill killall less link ln logname ls lzcat lzma lzop lzopcat man md5sum mkdir mktemp mv nc nl od paste patch pgrep pidof pipe_progress pkill printenv printf ps pwd readlink realpath reset rev rm rmdir rpm rpm2cpio sed seq sh sha1sum sha256sum sha3sum sha512sum shred shuf sleep sort split ssl_client stat strings su sum tac tail tar tee test time timeout touch tr true truncate ts ttysize uname uncompress unexpand uniq unix2dos unlink unlzma unlzop unxz unzip usleep uudecode uuencode vi watch wc wget which whoami whois xargs xxd xz xzcat yes zcat æœ‰äº†è¿™äº›å‘½ä»¤Windowså˜å¾—æ›´åƒLinuxäº†ã€‚å¦‚æœæœ‰æ²¡æœ‰çš„å‘½ä»¤å¯ä»¥å°è¯•æœç´¢ä¸€ä¸‹`scoop search something`ã€‚ å¼€å‘ç¯å¢ƒé…ç½® åœ¨ Linux é‡Œé…ç½®å¼€å‘ç¯å¢ƒæ˜¯å¾ˆç®€å•çš„ï¼Œä¾‹å¦‚åœ¨ ArchLinux é‡Œé…ç½® java å¼€å‘ç¯å¢ƒï¼Œå¾ˆå¿«æ·æ–¹ä¾¿ã€‚...</p></div><footer class=entry-footer><span title='2022-05-27 20:00:00 +0000 UTC'>May 27, 2022</span>&nbsp;Â·&nbsp;3 min&nbsp;Â·&nbsp;464 words&nbsp;Â·&nbsp;oldshensheep</footer><a class=entry-link aria-label="post link to è®© Windows æ›´åŠ é€‚åˆå¼€å‘" href=https://blog.oldshensheep.com/note/lindows/></a></article></main><footer class=footer><span>&copy; 2023 <a href=https://blog.oldshensheep.com/>oldshensheep</a></span>
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://git.io/hugopapermod rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg></a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script></body></html>